---
title: "How to use Goodreads data in Astro"
description: "Using the Content Loader API to get data from Goodreads book shelves/lists and dynamically build Goodreads components in Astro."
date: 2025-02-07
slug: "how-to-use-goodreads-data-in-astro"
tags: ['astro', 'goodreads', 'books', 'webdev']
image: './00-thumbnail.png'
authors: ['sadman']
---

import Callout from '@/components/mdx/Callout.astro';
import ImageGalleryCaption from '@/components/ImageGalleryCaption.astro';
import TraktGrid from '@/components/mdx/TraktGrid.astro';
import ImageZoom from '@/components/mdx/ImageZoom.astro';
import CodeToggle from '@/components/mdx/CodeToggle.astro';
import GoodreadsGrid from '@/components/mdx/GoodreadsGrid.astro';

import { Code } from 'astro-expressive-code/components';
import rssInBrowser from './rss-in-browser.jpg';
import rssInBrowserFull from './rss-in-browser-full.jpg';
import sadmanRss from './sadman-rss.xml?raw';

import { Image } from 'astro:assets';
import { SITE } from '@/consts';

## **A Goodreads API alternative (no, it's not another API)**

It's a bummer that [Goodreads retired their API](https://www.goodreads.com/api) back in 2020. 

Thankfully, Goodreads provides an RSS feed for the books in each user shelf (also called a list), which means you can still programmatically access data for all your books on Goodreads without having to rely on manually [requesting a copy of your data](https://help.goodreads.com/s/article/How-do-I-get-a-copy-of-my-data-from-Goodreads) every so often (or some other hacky way of retrieving your data).

And best of all, we can use the sweet new [Astro Content Loader API](https://docs.astro.build/en/reference/content-loader-reference/) to handle the retrieval and caching of said data from Goodreads â€” so we can simplify the development experience and focus on actually using the data in our Astro site (instead of worrying about how to retrieve it).

Here's how.

<Callout type="warning">
  Your site needs to [be on Astro 5.x to be able to use the Content Loader API](https://docs.astro.build/en/guides/upgrade-to/v5/#legacy-v20-content-collections-api) for fetching and caching data.

  You can still retrieve the data using plain JavaScript (I've included a section on that below) and then pass it to your components as props, but the Content Loader API is a much more elegant solution for handling data fetching and caching in Astro (so upgrading is recommended!)
</Callout>

## Goodreads RSS feeds

You can find the RSS feed that Goodreads generates for each user shelf in one of two ways:

1. Scroll to the bottom on the list page and click on the little orange RSS icon (or simple right-click and copy the url); or
2. If you already have the url for the Goodreads shelf (e.g. https://www.goodreads.com/review/list/152185079-sadman-hossain?shelf=read), then you can simply append  `_rss` to `list` in the url to get the RSS feed.

```txt frame="none" ins="_rss" wrap=false showLineNumbers=true
https://www.goodreads.com/review/list/152185079-sadman-hossain?shelf=read
https://www.goodreads.com/review/list_rss/152185079-sadman-hossain?shelf=read
```

<Callout type="info">
  While Goodreads includes the user name in the list url, it only uses the account number preceding the name so the part of the url with the user name (e.g. `-sadman-hossain`) can be safely discarded. 
  
  ```txt frame="none" del="-sadman-hossain" wrap=true showLineNumbers=true
  https://www.goodreads.com/review/list/152185079-sadman-hossain?shelf=read
  https://www.goodreads.com/review/list_rss/152185079?shelf=read
  ```

  - https://www.goodreads.com/review/list/152185079-sadman-hossain?shelf=read is the same as
  - https://www.goodreads.com/review/list_rss/152185079?shelf=read
</Callout>

### How Goodreads list urls work

The way list urls (and by corollary, RSS feed urls) work in Goodreads is that, for each user, there is a base url for their **All** bookshelf. The **All** bookshelf, as you can imagine, contains all the books currently stored in all of that user's bookshelves.
- e.g. https://www.goodreads.com/review/list/152185079-sadman-hossain for myself.

Every other bookshelf for a user (e.g. **Read**, **Currently Reading**, custom shelves) uses the same base url as the **All** bookshelf and then appends a suffix to the url like so: `...?shelf=<SHELF-NAME>`. 

This is nice because it means all you need programmatically create urls for Goodreads bookshelves is the account number and any custom shelf names (the `read`, `currently-reading`, and `want-to-read` shelves are standard across all accounts) for a user.

```txt frame="none" wrap=false ins=/shelf=.*/ {"\'All\' bookshelf": 1-2} ins={"Standard bookshelves": 4-7}  ins={"Custom bookshelves": 9-12}
.
https://www.goodreads.com/review/list/152185079-sadman-hossain


https://www.goodreads.com/review/list/152185079-sadman-hossain?shelf=read
https://www.goodreads.com/review/list/152185079-sadman-hossain?shelf=currently-reading
https://www.goodreads.com/review/list/152185079-sadman-hossain?shelf=want-to-read


https://www.goodreads.com/review/list/152185079-sadman-hossain?shelf=paused
https://www.goodreads.com/review/list/152185079-sadman-hossain?shelf=software
...
```

<Callout type="info">
  I mention this little tidbit about Goodreads list urls because I once mistakenly removed the `...?shelf=read` suffix from the base url of the Goodreads component on my blog's [/about](/about) page (which is supposed to only show my recently read books), and I was very confused at the results (which included books I hadn't even read) until I took a closer look at the urls.
</Callout>

### Data schema

RSS feeds are just urls to raw XML files, so you can open them up in your browser and easily see how the data is stored and in what tags.

Of course, Goodreads RSS feeds use no stylesheets whatsoever, so parsing through the unformatted text is unwieldy.

<Image
  src={rssInBrowserFull}
  layout="constrained"
  alt="Goodreads RSS Feed formatting in FireFox"
/>

Run the XML code through a formatter and now we can get a better look at the data we can actually expect. In addition to the title and description of the bookshelf (at the very top of the XML file, hidden but revealable in the code snippet below), and you can see that there's actually quite a lot of book data within the RSS feed:

<Code code={sadmanRss} lang="xml" title="rss.xml" collapse="1-20, 65-9999999" wrap={false} />

**How about that, huh?**

This is more than enough to put together a Goodreads bookshelf on your blog (or just list your recently read books), which leads into the next part of this post: **loading Goodreads RSS data into Astro using the Content Loader API** (and plain old javascript for those curious, too).

## Astro Content Loader API

### Quick introduction

Astro's Content Loader API allows you to fetch and cache data from local and external sources (like Goodreads RSS feeds), and then use that data in your Astro components or pages. There's a lot more to it than that, but that's the gist of it. 

<Callout type="info">
  For the full overview, take a look at the official Astro documentation on the [Content Loader API](https://docs.astro.build/en/reference/content-loader-reference/).
</Callout>

there are a couple of community-built loaders out there,

bro just freewrite then do edit later, coming up with ideas is the hard part so just go with the flow.

since we're dealing with an external source ala goodreads rss feed url, 

two code elements side by side -- thats what i want to see

<GoodreadsGrid
  gridMarginTop={0}
  titleMarginTop={1}
  filterTitles={[
    'Project Hail Mary',
    'Wool Omnibus (Silo, #1)',
    'Shift (Silo, #2)',
    'Dust (Silo, #3)',
    'A Little Hatred (The Age of Madness, #1)',
    'The Trouble with Peace (The Age of Madness, #2)',
    'The Wisdom of Crowds (The Age of Madness, #3)',
    'Recursion',
    'Dark Matter',
    'You Like It Darker',
    '',
  ]}
/>

<CodeToggle 
  code="console.log('Hello world!')" 
  lang="js" 
  title="test"
/>
