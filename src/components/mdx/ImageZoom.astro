---
import { Image } from 'astro:assets';

export interface Props {
  src: string;
  alt: string;
  class?: string;
}

const { src, alt } = Astro.props;
---

<div class="image-zoom-container">
  <Image src={src} alt={alt} class="zoomable-image"/>
</div>

<script>
  let isZoomed = false;

  function toggleZoom(event: MouseEvent) {
    const currentTarget = event.currentTarget as HTMLElement | null;
    if (!currentTarget) return;
    const img = currentTarget.querySelector('img') as HTMLImageElement;
    isZoomed = !isZoomed;
    img.style.transform = isZoomed ? 'scale(1.5)' : 'scale(1)';
    img.style.cursor = isZoomed ? 'zoom-out' : 'zoom-in';
  }

  const container = document.querySelector('.image-zoom-container');
  if (container) {
    container.addEventListener('click', toggleZoom);
  }
</script>

<style>
  .image-zoom-container {
    position: relative;
    display: inline-block;
    cursor: zoom-in;
  }

  .zoomable-image {
    width: 100%;
    transition: transform 0.25s ease;
  }  
</style>